<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<load file="__PUBLIC__/Js/jquery-2.1.4.min.js" />
	<load file="__PUBLIC__/Js/bootstrap.min.js" />
	<load file="__PUBLIC__/Css/bootstrap.min.css" />
</head>
<body>

	<!--搜索-->
	<form method="get" class="form-inline" style="background:#ededed">
		<div class="form-group">
			<input type="search" name="search" value="<{$name}>" class="form-control input-sm" id="" placeholder="请输入宝贝名称"></div>
			<div class="form-group">
				<label for="exampleInputEmail2">价格:</label>
				<input type="text" name="gt" value="<{$gt}>" class="form-control input-sm" style="width:70px;" id="" placeholder=""> -
				<input type="text" name="lt" value="<{$lt}>" class="form-control input-sm" style="width:70px" id="" placeholder=""></div>
				<div class="form-group" style="padding:0 20px;border-right:1px solid #eee">
					<label for="exampleInputEmail2">状态:</label>
					<select class="selectpicker" name="state" data-style="btn-info">
						<if condition="$state eq 1">
							<option value="1" selected>--上架--</option>
							<option value="0">--下架--</option>
							<else />
							<option value="1">--上架--</option>
							<option value="0" selected>--下架--</option>
						</if>
					</select></div>
					<button data-submit="submit" type="submit" class="btn btn-primary">搜索</button> </form>

					
					<!--添加商品-->
					<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">添加商品</button>
					<!-- Modal -->
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
									<h4 class="modal-title" id="myModalLabel"><b >添加商品</b></h4>
								</div>
								<div class="modal-body" style="padding-bottom:0px;padding-left: 0px;padding-right: 0px;">
									<!--主题内容-->
									<!-- col-sm-4 -->
				<!--
				<form class="form-horizontal">
				<div style="padding:0 30px;">
					<div class="form-group">
						<label for="">商品名称</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">商品价格</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">库存</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">折扣</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">状态</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">店铺类别</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">商品</label>
						<input type="email" class="form-control" id=""></div>
					<div class="form-group">
						<label for="">简介</label>
						<input type="email" class="form-control" id=""></div>
				</form>
				</div>
			-->

			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">
				<title>Document</title>
				<link rel="stylesheet" href="__PUBLIC__/Css/bootstrap.min.css">
				<style>
					input.text-word {
						width: 310px;
						height: 36px;
						line-height: 36px;
						border: 1px solid #EBEBEB;
						background: #FFF none repeat scroll 0% 0%;
						font-family: "Microsoft YaHei","Tahoma","Arial","宋体";
						padding: 0px 10px;
					}
					#addgood select,#up select {
						width: 310px;
						height: 36px;
						line-height: 36px;
						border: 1px solid #EBEBEB;
						background: #FFF none repeat scroll 0% 0%;
						font-family: "Microsoft YaHei","Tahoma","Arial","宋体";
						color: #666;
					}
					input.text-but {
						width: 100px;
						height: 40px;
						line-height: 30px;
						border: 1px solid #CDCDCD;
						background: #E6E6E6 none repeat scroll 0% 0%;
						font-family: "Microsoft YaHei","Tahoma","Arial","宋体";
						color: #969696;
						float: left;
						margin: 0px 10px 0px 0px;
						display: inline;
						cursor: pointer;
						font-size: 14px;
						font-weight: bold;
					}
					#addgood td.text{
						padding:15px 10px;
						background:#f9f9f9;
						width:130px;
						text-align:right;
						font-weight:bold;
						vertical-align: middle;
					}
					#vl-toolbar {
						height: 30px;
						width: auto;
						background: #DFDFDF none repeat scroll 0% 0%;
						border-bottom: 1px solid #CCC;
						z-index: 10000371;
						position: relative;
					}

					#maintable tr>th, .maincenter { 
						text-align: center; 
					}
				</style>

				<link rel="stylesheet" href="__STORECSS__/shop-cybertron.css" type="text/css">
				<link rel="stylesheet" href="__STORECSS__/index.css" type="text/css" media="screen">


				<script type="text/javascript" src="__STOREJS__/addgood.js"></script>
			</head>
			<body>
				<div style="" id="vl-main">
					<form id="addgood" >
						<table class="table table-bordered">
							<tr style="padding:10px 0;">
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">商品名称:</td>
								<td style="padding:15px 10px;">
									<input class="text-word" name="name" type="text" value="">
								</td>
							</tr>
							<tr style="padding:10px 0;">
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">商品价格:</td>
								<td style="padding:15px 10px;">
									<input class="text-word" name="price" type="text" value="">
								</td>
							</tr>
							<tr style="padding:10px 0;">
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">库存:</td>
								<td style="padding:15px 10px;">
									<input class="text-word" name="stock" type="text" value="">
								</td>
							</tr>
							<tr style="padding:10px 0;">
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">折扣:</td>
								<td style="padding:15px 10px;">
									<input class="text-word" name="discount" type="text" value="">
								</td>
							</tr>
							<tr style="padding:10px 0;">
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">状态:</td>
								<td style="padding:15px 10px;">
									<select name="level" id="state">
										<option value="1">上架</option>
										<option value="0">下架</option>
									</select>
								</td>
							</tr>

							<!--店铺类别-->
							<tr>
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">店铺类别:</td>
								<td style="padding:15px 10px;">
									<select name="level" id="p_type">
										<option value="">&nbsp;&nbsp;--请选择--</option>
										<foreach name="pType" item="val">
											<if condition="$val['state'] neq null">
												<option  value="<{$val['p_id']}>">&nbsp;&nbsp;<{$val['name']}></option>
											</if>
										</foreach>
									</select>
									<select name="level" id="ep_type">
									</select>
								</td>
							</tr>
							<!--商品类别-->
							<tr>
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">商品分类:</td>
								<td style="padding:15px 10px;">
									<select name="level" id="h_type">
										<option value="">&nbsp;&nbsp;--请选择--</option>
										<foreach name="hType" item="val">
											<if condition="$val['p_id'] eq 0">
												<option value="<{$val['id']}>">&nbsp;&nbsp;<{$val['name']}></option>
											</if>
										</foreach>
									</select>
									<select name="level" id="e_type">
									</select>
									<select name="level" id="s_type">
									</select>
								</td>
							</tr>
							<tr>
								<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">简介:</td>
								<td style="padding:15px 10px;">
									<textarea id="summary" cols="42" rows="4"></textarea>
								</td>
							</tr>

						</table>
					</form>
				</div>
			</body>
			</html>
			<!--主题内容结束-->
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			<button type="button" id="sub" class="btn btn-primary">Save changes</button>
		</div>
	</div>
</div>
</div>
<!--表格遍历-->
<table id="maintable" data-for="foreach" class="table table-hover table-bordered table-condensed">
	<thead>
		<tr class="active">
			<th width="7%">缩略图</th>
			<th width="25%">宝贝名称</th>
			<th width="6%">价格</th>
			<th width="6%">折扣</th>
			<th width="7%">分类</th>
			<th width="8%">创建时间</th>
			<th width="18%">简介</th>
			<th width="6%">状态</th>
			<th width="17%">操作</th>
		</tr>
	</thead>
	<tbody>
		<foreach name="goods" item="val">

			<tr id="" data-for="">
				<td class="maincenter">
					<img src="__PUBLIC__<{$val['g_pic']}>" style="height:30px;max-width:80px;" alt="">

				</td>
				<td class="maincenter"><{$val['name']}></td>
				<td class="maincenter"><{$val['price']}></td>
				<td class="maincenter"><{$val['discount'] / 10}></td>
				<td class="maincenter"><{$val['pname']}></td>

				<td class="maincenter"><{$val['addtime']|date='Y-m-d',###}></td>
				<td class="maincenter ">
					<p class="zxx_text_overflow_8" data-container="body" data-toggle="popover" data-placement="bottom" data-content="<{$val['summary']}>">
						<{$val['summary']}>	
					</p>
				</td>
				<td>
					<if condition="$val['state'] eq 1">出售中
						<else />下架
					</if></td>
					<td >

						<!-- Button trigger modal -->		
						<a class="btn btn-info btn-sm" href="<{:U('Store/Images/index',array('id'=>$val['id']))}>">图片管理</a>
						<!-- Button trigger modal -->		
						
						<!-- Modal -->		
						<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-id="<{$val['id']}>" path-id="update" data-target="#update">编辑</button>
						<!-- Modal -->
						<div class="modal fade" id="update" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title" id=""><b class="btn btn-info btn-lg">编辑</b></h4>
									</div>


									<!--内容start-->
									<div class="modal-body" style="padding-bottom:0px;padding-left: 0px;padding-right: 0px;">
										<table id="up" class="table table-bordered">
											<tr style="padding:10px 0;">
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">商品名称:</td>
												<td style="padding:15px 10px;">
													<input class="text-word" name="upname" type="text" value="<{$good['name']}>">
												</td>
											</tr>
											<tr style="padding:10px 0;">
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">商品价格:</td>
												<td style="padding:15px 10px;">
													<input class="text-word" name="upprice" type="text" value="">
												</td>
											</tr>
											<tr style="padding:10px 0;">
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">库存:</td>
												<td style="padding:15px 10px;">
													<input class="text-word" name="upstock" type="text" value="">
												</td>
											</tr>
											<tr style="padding:10px 0;">
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">折扣:</td>
												<td style="padding:15px 10px;">
													<input class="text-word" name="updiscount" type="text" value="">
												</td>
											</tr>
											<tr style="padding:10px 0;">
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">状态:</td>
												<td style="padding:15px 10px;">
													<select name="level" id="states">
														<option class="1" value="1">上架</option>
														<option class="0" value="0">下架</option>
													</select>
												</td>
											</tr>

											<!--店铺类别-->
											<tr>
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">店铺类别:</td>
												<td style="padding:15px 10px;">
													<select name="" id="type">
														<foreach name="pType" item="vo">
															<if condition="$vo['state'] neq null">
																<if condition="$vo['states'] neq 1">
																	<option class="<{$vo['id']}>" value="<{$vo['id']}>" disabled ><{$vo['name']}></option>
																	<else />
																	<option class="<{$vo['id']}>" value="<{$vo['id']}>" ><{$vo['name']}></option>
																</if>
																<else />
																<option class="<{$vo['id']}>" value="<{$vo['id']}>" >&nbsp;&nbsp;<{$vo['name']}></option>
															</if>
														</foreach>
													</select>
													
												</td>
											</tr>
											
											<tr>
												<td style="vertical-align: middle;padding:15px 10px;background:#f9f9f9;width:130px;text-align:right;font-weight:bold">简介:</td>
												<td style="padding:15px 10px;">
													<textarea name="upsummary" cols="42" rows="4"><{$vo['summary']}></textarea>
												</td>
											</tr>

										</table>




										<!--主题内容结束-->
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										<button type="button" id="upda" class="btn btn-primary">Save changes</button>
									</div>
								</div>
							</div>
						</div>


						<if condition="$state eq 1">
							<!-- Button trigger modal -->		
							<button type="button" class="btn btn-danger btn-sm" data-type="state" data-id="<{$val['id']}>">下架</button>
							<!-- Modal -->		
							<!-- Button trigger modal -->
							<else />
							<button type="button" class="btn btn-danger btn-sm" id="del" data-type="del" data-id="<{$val['id']}>">删除</button>
						</if>

					</td></tr>
				</foreach>
			</tbody>
			<tfoot>
				
				<tr>
					<td colspan="9"><{$pageNav}></td>
				</tr>
			</tfoot>
		</table>
		<script>
			$(function(){
				$('button[data-type="del"]').click(function(){
					var $id = $(this).attr('data-id');
					var obj = $(this);
					$.get('del',{id:$id},function(data){
						if(data){
					//obj.parents('tr').css('background','red')
					obj.parents('tr').remove();
				}
			})
				})
		//限制字符个数
		$(".zxx_text_overflow_8").each(function(){
			var maxwidth=10; 
			if($(this).text().length>maxwidth){
				$(this).text($(this).text().substring(0,maxwidth));
				$(this).html($(this).html()+'...');
			}
		});
		$(".zxx_text_overflow_8").mouseover(function(){
			$(this).popover('show');
		})
		$(".zxx_text_overflow_8").mouseout(function(){
			$(this).popover('hide');
		})
	})
		</script>
	</body>
	</html>